{% extends "base.html" %}

{% block title %}Paquetes Turísticos - Sistema de Gestión Turística{% endblock %}

{% block content %}
<!-- Encabezado -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-success">
        <i class="fas fa-suitcase me-2"></i>
        Paquetes Turísticos
    </h2>
    <a href="{{ url_for('crear_paquete') }}" class="btn btn-success">
        <i class="fas fa-plus me-2"></i>Nuevo Paquete
    </a>
</div>

<!-- Filtros -->
<div class="row mb-4">
    <div class="col-md-6">
        <a href="{{ url_for('listar_paquetes') }}" 
           class="btn btn-outline-primary {% if not request.args.get('disponibles') %}active{% endif %}">
            <i class="fas fa-list me-1"></i>Todos
        </a>
        <a href="{{ url_for('listar_paquetes') }}?disponibles=1" 
           class="btn btn-outline-success {% if request.args.get('disponibles') %}active{% endif %}">
            <i class="fas fa-check-circle me-1"></i>Solo Disponibles
        </a>
    </div>
</div>

<!-- Lista de paquetes -->
{% if paquetes %}
    <div class="row">
        {% for paquete in paquetes %}
            <div class="col-lg-6 mb-4">
                <div class="card paquete-card border-0 shadow-sm h-100 {% if not paquete.disponible %}opacity-75{% endif %}">
                    <!-- Header del paquete -->
                    <div class="card-header bg-transparent">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h5 class="card-title text-success mb-1">{{ paquete.nombre }}</h5>
                                <p class="text-muted small mb-0">
                                    <i class="fas fa-calendar me-1"></i>{{ paquete.duracion_dias }} días
                                    <span class="mx-2">|</span>
                                    <i class="fas fa-hotel me-1"></i>{{ paquete.hotel_incluido.nombre }}
                                </p>
                            </div>
                            <div class="text-end">
                                <span class="badge bg-success fs-6">${{ "%.2f"|format(paquete.precio_total) }}</span>
                                <div class="mt-1">
                                    {% if paquete.disponible %}
                                        <span class="badge bg-success">Disponible</span>
                                    {% else %}
                                        <span class="badge bg-secondary">No disponible</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Contenido -->
                    <div class="card-body">
                        <p class="card-text">{{ paquete.descripcion[:150] }}{% if paquete.descripcion|length > 150 %}...{% endif %}</p>
                        
                        {% if paquete.actividades %}
                            <div class="actividades-preview">
                                <h6 class="text-info mb-2">
                                    <i class="fas fa-list-ul me-1"></i>Actividades Incluidas:
                                </h6>
                                <p class="small text-muted">{{ paquete.actividades[:100] }}{% if paquete.actividades|length > 100 %}...{% endif %}</p>
                            </div>
                        {% endif %}
                        
                        <!-- Información del hotel -->
                        <div class="hotel-info bg-light p-3 rounded mt-3">
                            <h6 class="text-primary mb-2">
                                <i class="fas fa-bed me-1"></i>Hotel Incluido
                            </h6>
                            <p class="mb-1"><strong>{{ paquete.hotel_incluido.nombre }}</strong></p>
                            <p class="text-muted small mb-0">
                                <i class="fas fa-map-marker-alt me-1"></i>
                                {{ paquete.hotel_incluido.ciudad }}, {{ paquete.hotel_incluido.pais }}
                            </p>
                        </div>
                    </div>
                    
                    <!-- Acciones -->
                    <div class="card-footer bg-transparent">
                        <div class="d-flex gap-2">
                            <a href="{{ url_for('ver_paquete', paquete_id=paquete.id) }}" 
                               class="btn btn-success btn-sm">
                                <i class="fas fa-eye me-1"></i>Ver Completo
                            </a>
                            <a href="{{ url_for('toggle_disponibilidad', paquete_id=paquete.id) }}" 
                               class="btn btn-outline-{% if paquete.disponible %}secondary{% else %}success{% endif %} btn-sm">
                                <i class="fas fa-{% if paquete.disponible %}pause{% else %}play{% endif %} me-1"></i>
                                {% if paquete.disponible %}Desactivar{% else %}Activar{% endif %}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <!-- Mensaje cuando no hay paquetes -->
    <div class="text-center py-5">
        <div class="empty-state">
            <i class="fas fa-suitcase fa-4x text-muted mb-3"></i>
            <h3 class="text-muted">No hay paquetes turísticos</h3>
            <p class="text-muted mb-4">Comienza creando tu primer paquete turístico</p>
            <a href="{{ url_for('crear_paquete') }}" class="btn btn-success">
                <i class="fas fa-plus me-2"></i>Crear Primer Paquete
            </a>
        </div>
    </div>
{% endif %}
{% endblock %}